<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CAPSENSE™ Middleware Library 7.0.0: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="IFXCYP_one-line.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CAPSENSE™ Middleware Library 7.0.0</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CAPSENSE™ Middleware Library 7.0.0 Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>CAPSENSE&trade; is a CYPRESS&trade; capacitive sensing solution from Infineon. Capacitive sensing can be used in a variety of applications and products where conventional mechanical buttons can be replaced with sleek human interfaces to transform the way users interact with electronic systems. These include home appliances, and automotive, IoT, and industrial applications. CAPSENSE&trade; supports multiple interfaces (widgets) using CSD, CSX, and ISX sensing methods with robust performance.</p>
<p>CAPSENSE&trade; has become a popular technology to replace conventional mechanical- and optical-based user interfaces. There are fewer parts involved, which saves cost and increases reliability with no wear-and-tear. The main advantages of CAPSENSE&trade; compared with other solutions are: robust performance in harsh environmental conditions and rejection of a wide range of external noise sources.</p>
<p>Use CAPSENSE&trade; for:</p><ul>
<li>Touch and gesture detection for various interfaces</li>
<li>Proximity detection for innovative user experiences and low power optimization</li>
<li>Contactless liquid-level sensing in a variety of applications</li>
<li>Touch-free operations in hazardous materials</li>
</ul>
<h1><a class="anchor" id="section_capsense_general"></a>
General Description</h1>
<p>The CAPSENSE&trade; middleware Library supports operation with fourth-generation, fifth-generation and fifth-generation low power of CAPSENSE&trade; HW. CAPSENSE&trade; HW enables the multiple sensing capabilities on PSOC&trade; devices including the Self-Capacitance (CSD) and Mutual-Capacitance (CSX) capacitive touch sensing solutions, inductive sensing (ISX), impedance measurement, and other features.</p>
<p>Middleware access available the CAPSENSE&trade; HW block through the corresponding peripheral Driver:</p><ul>
<li>CSD (CAPSENSE&trade; Sigma-Delta) driver for the forth-generation of the CAPSENSE&trade; HW;</li>
<li>MSC (Multi-Sensor Converter) driver for the fifth-generation of the CAPSENSE&trade; HW;</li>
<li>MSCLP (Multi-Sensor Converter Low Power) driver for the fifth-generation of the CAPSENSE&trade; HW;</li>
</ul>
<p>The CAPSENSE&trade; peripheral driver does not provide any system-level functions. It only implements the interface to the CAPSENSE&trade; HW resource.</p>
<p>The supported CAPSENSE&trade; HW blocks can perform only one function at a time. However, all supported functionality (like CAPSENSE&trade;, CSDADC, etc.) can be time-multiplexed in a design. I.e. you can save the existing state of the CAPSENSE&trade; middleware, restore the state of the CSDADC middleware, perform CSDADC measurements, and then switch back to the CAPSENSE&trade; functionality. For details and code examples, refer to the description of the <a class="el" href="group__group__capsense__high__level.html#ga899ef1058ead082503771da68e584b82" title="Saves the state of CAPSENSE™ so the functionality can be restored using the Cy_CapSense_Restore() fu...">Cy_CapSense_Save()</a> and <a class="el" href="group__group__capsense__high__level.html#gaf87102783ec511c2e5f2024680112d16" title="Resumes the middleware operation if the Cy_CapSense_Save() function was called previously. ">Cy_CapSense_Restore()</a> functions.</p>
<div class="image">
<img src="CAPSENSE_SOLUTION_MSCLP.png" alt="CAPSENSE_SOLUTION_MSCLP.png" width="800px"/>
<div class="caption">
CAPSENSE&trade; Solution</div></div>
 <p>This section describes only the CAPSENSE&trade; middleware. Refer to the corresponding sections of documentation for other middleware supported by the CAPSENSE&trade; HW.</p>
<p>A CAPSENSE&trade; solution includes:</p><ul>
<li>The CAPSENSE&trade; Configurator tool to create and configure CAPSENSE&trade; widgets. It can be launched in ModusToolbox&trade; from the CAPSENSE&trade; superblock personality and in Stand-alone mode. It contains a separate document about how to create and configure widgets, parameters and algorithm descriptions.</li>
<li>API to control the design from the application program. This documentation describes API with code snippets of how to use them.</li>
<li>The CAPSENSE&trade; Tuner tool for real-time tuning, testing, and debugging, for easy and smooth designing of human interfaces on customer products. The Tuner tool communicates with a device through a HW bridge and communication drivers (EzI2C, UART, etc.) and allows to monitor widget statuses, sensor signals, detected touch positions, gestures, etc. The application program does not need to interact with the CSD driver and/or other drivers such as GPIO, SysClk directly. All of that is configured and managed by middleware.</li>
</ul>
<p>Include cy_capsense.h to get access to all functions and other declarations in this library. If you are using the ModusToolbox&trade; CAPSENSE&trade; Configurator tool, you can include cycfg_capsense.h only.</p>
<h2><a class="anchor" id="subsection_capsense_features"></a>
Features</h2>
<ul>
<li>Offers best-in-class signal-to-noise ratio (SNR)</li>
<li>Supports Self-Capacitance (CSD) and Mutual-Capacitance (CSX) sensing methods</li>
<li>Inductive sensing method (ISX) available for fifth-generation low power CAPSENSE&trade;</li>
<li>Fifth-generation low power CAPSENSE&trade; supports autonomous scanning in Deep Sleep power mode</li>
<li>Supports various Widgets, such as Buttons, Matrix Buttons, Sliders, Touchpads, and Proximity Sensors</li>
<li>Provides ultra-low power consumption capacitive sensing technology</li>
<li>Contains the integrated graphical CAPSENSE&trade; Tuner tool for real-time tuning, testing, and debugging</li>
<li>Provides superior immunity against external noise and low-radiated emission</li>
<li>Offers best-in-class liquid tolerance</li>
<li>Supports one-finger and two-finger gestures</li>
</ul>
<h1><a class="anchor" id="group_capsense_quick_start"></a>
Quick Start Guide</h1>
<p>The quickest way to get started with CAPSENSE&trade; is using code examples. Infineon Technologies continuously extends their portfolio of code examples at the <a href="http:/\/www.infineon.com"><b>Infineon Technologies</b></a> and at the <a href="https:/\/github.com/Infineon"><b> Infineon Technologies GitHub</b></a>. The following are the links to code examples for different PSOC&trade; families presented on GitHub.</p>
<h2><a class="anchor" id="group_capsense_quick_start_psoc4_csd_ces"></a>
Code Examples for PSOC™ 4 Devices with fourth-generation CAPSENSE™</h2>
<ul>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-capsense-csd-button-tuning"><b>CSD Button Manual Tuning</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-capsense-csx-button-tuning"><b>CSX Button Manual Tuning</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-capsense-csd-slider-tuning"><b>CSD Slider Manual Tuning</b></a></li>
</ul>
<h2><a class="anchor" id="group_capsense_quick_start_psoc4_msc_ces"></a>
Code Examples for PSOC™ 4 Devices with fifth-generation CAPSENSE™</h2>
<ul>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msc-capsense-csd-button-tuning"><b>CSD Button Manual Tuning</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msc-capsense-csx-button-tuning"><b>CSX Button Manual Tuning</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msc-capsense-csd-slider-tuning"><b>CSD Slider Manual Tuning</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msc-capsense-csd-touchpad-tuning"><b>CSD Touchpad Manual Tuning</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msc-capsense-csx-touchpad-tuning"><b>CSX Touchpad Manual Tuning</b></a></li>
</ul>
<h2><a class="anchor" id="group_capsense_quick_start_psoc4_msclp_ces"></a>
Code Examples for PSOC™ 4 Devices with fifth-generation low power CAPSENSE™</h2>
<ul>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msclp-capsense-low-power"><b>MSCLP CAPSENSE&trade; low power</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msclp-low-power-csd-button"><b>MSCLP low-power self-capacitance button</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msclp-low-power-csx-slider"><b>MSCLP low-power mutual-capacitance slider</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msclp-liquid-tolerant-proximity"><b>MSCLP CAPSENSE&trade; liquid-tolerant proximity-sensing</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc4-msclp-csx-touchpad"><b>MSCLP multitouch mutual-capacitance touchpad tuning</b></a></li>
</ul>
<h2><a class="anchor" id="group_capsense_quick_start_psoc6_csd_ces"></a>
Code Examples for PSOC™ 6 Devices with fourth-generation CAPSENSE™</h2>
<ul>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc6-capsense-buttons-slider"><b>Two Buttons and Slider with CAPSENSE&trade; Tuner</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc6-low-power-capsense-freertos"><b>low power Slider and Ganged Sensors with FreeRTOS</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc6-capsense-custom-scan"><b>Custom Scan</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc6-ble-capsense-tuner-client"><b>BLE Client for CAPSENSE&trade; Tuning</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc6-ble-capsense-tuner-server"><b>BLE Server for CAPSENSE&trade; Tuning</b></a></li>
</ul>
<p>The CAPSENSE&trade; middleware can be used in various development environments such as ModusToolbox&trade;, MBED, etc. Refer to the <a class="el" href="index.html#section_capsense_toolchain">Supported Software and Tools</a>. The following are the configuration considerations for the different environments.</p>
<h2><a class="anchor" id="group_capsense_quick_start_modus"></a>
ModusToolbox™ Configuration Considerations</h2>
<p>This quick start guide assumes that the environment is configured:</p><ul>
<li>The <a href="https:/\/github.com/Infineon/mtb-pdl-cat1"><b>CAT1 Peripheral Driver Library (PDL)</b></a> is included in the project in case if the PSOC&trade; 6 device is used.</li>
<li>The <a href="https:/\/github.com/Infineon/mtb-pdl-cat2"><b>CAT2 Peripheral Driver Library (PDL)</b></a> is included in the project in case if the PSOC&trade; 4 device is used.</li>
<li><a href="https:/\/www.infineon.com/ModusToolboxDeviceConfig"><b>ModusToolbox&trade; Device Configurator Tool</b></a>, <a href="https:/\/www.infineon.com/ModusToolboxCapSenseConfig"><b>ModusToolbox&trade; CAPSENSE&trade; Configurator Tool</b></a>, and <a href="https:/\/www.infineon.com/ModusToolboxCapSenseTuner"><b>ModusToolbox&trade; CAPSENSE&trade; Tuner Tool</b></a> are installed on the machine.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Ensure to set up the device power voltages correctly to the proper operation of the device power domains. The Setup is on the System Tab of the Device Configurator tool. Enable the Power check box and set up the voltages as they are red-outlined in the picture below.</dd></dl>
<div class="image">
<img src="check_power.png" alt="check_power.png" width="800px"/>
<div class="caption">
Power Setup</div></div>
 <h2><a class="anchor" id="group_capsense_quick_start_mbed"></a>
MBED OS Configuration Considerations</h2>
<p>You can immediately start with the following MBED OS code example available at the <a href="https:/\/github.com/Infineon/"><b> Infineon GitHub</b></a>:</p><ul>
<li><a href="https:/\/github.com/Infineon/mbed-os-example-capsense"><b>CAPSENSE&trade; buttons and slider for PSOC&trade; 6 MCU with Mbed OS</b></a></li>
</ul>
<p>If you are doing your own project, remember to include cycfg.h file: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;cycfg.h&quot;</span></div></div><!-- fragment --><p> and call the resource initialization functions in main() at the beginning: </p><div class="fragment"><div class="line">init_cycfg_all();</div></div><!-- fragment --><h1><a class="anchor" id="section_capsense_configuration"></a>
Summary of Application Programming Interface (API)</h1>
<p>The CAPSENSE&trade; middleware operates on the top of the MSCLP/MSC/CSD HW driver. Refer to the PDL API Reference Manual.</p>
<p>This document provides descriptions of the functions in the CAPSENSE&trade; middleware library, and descriptions of the data structures (register map) used by the middleware library.</p>
<p>The Application Programming Interface (API) routines allow controlling and executing specific tasks using the CAPSENSE&trade; middleware. The CAPSENSE&trade; API is described in the following sections:</p><ul>
<li><a class="el" href="group__group__capsense__high__level.html">High-level Functions</a></li>
<li><a class="el" href="group__group__capsense__low__level.html">Low-level Functions</a></li>
<li><a class="el" href="group__group__capsense__data__structure.html">Data Structure</a></li>
<li><a class="el" href="group__group__capsense__enums.html">Enumerated Types</a></li>
<li><a class="el" href="group__group__capsense__macros.html">Macros</a></li>
<li><a class="el" href="group__group__capsense__callbacks.html">Callbacks</a></li>
</ul>
<h1><a class="anchor" id="section_capsense_toolchain"></a>
Supported Software and Tools</h1>
<p>This version of the CAPSENSE&trade; middleware was validated for compatibility with the following Software and Tools: </p><table class="doxtable">
<tr>
<th>Software and Tools </th><th>Version  </th></tr>
<tr>
<td>ModusToolbox&trade; Software Environment </td><td>3.5.0  </td></tr>
<tr>
<td>- ModusToolbox&trade; Device Configurator tool </td><td>5.30  </td></tr>
<tr>
<td>- ModusToolbox&trade; MSC Superblock Personality for PSOC&trade; 4 devices in the Device Configurator tool </td><td>1.0  </td></tr>
<tr>
<td>- ModusToolbox&trade; MSCLP Personality for PSOC&trade; 4 devices in the Device Configurator tool </td><td>3.0  </td></tr>
<tr>
<td>- ModusToolbox&trade; MSC Personality for PSOC&trade; 4 devices in the Device Configurator tool </td><td>1.1  </td></tr>
<tr>
<td>- ModusToolbox&trade; CSD Personality for PSOC&trade; 4 devices in the Device Configurator tool </td><td>2.0  </td></tr>
<tr>
<td>- ModusToolbox&trade; CSD Personality for PSOC&trade; 6 devices in the Device Configurator tool </td><td>3.0  </td></tr>
<tr>
<td>- ModusToolbox&trade; CAPSENSE&trade; Configurator tool </td><td>8.0.0  </td></tr>
<tr>
<td>- ModusToolbox&trade; CAPSENSE&trade; Tuner tool </td><td>8.0.0  </td></tr>
<tr>
<td>CAT1 Peripheral Driver Library (PDL) </td><td>3.16.0  </td></tr>
<tr>
<td>CAT2 Peripheral Driver Library (PDL) </td><td>2.16.0  </td></tr>
<tr>
<td>GCC Compiler </td><td>11.3.1  </td></tr>
<tr>
<td>IAR Compiler </td><td>9.50.2  </td></tr>
<tr>
<td>Arm Compiler 6 <sup><b>(Note 1)</b></sup> </td><td>6.22.0  </td></tr>
<tr>
<td>MBED OS (only for PSOC&trade; 6) </td><td>5.15.8  </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>The CAPSENSE&trade; middleware includes the pre-compiled libraries for Arm Compiler 6. They are built with the following options to be compatible with ModusToolbox&trade; and MBED:<ul>
<li>-fshort-enums - Set the size of an enumeration type to the smallest data type that can hold all enumerator values</li>
<li>-fshort-wchar - Set the size of wchar_t to 2 bytes </li>
</ul>
</dd>
<dd>
To operate in custom environments with Arm Compiler 6, apply the above mentioned build options.</dd></dl>
<h1><a class="anchor" id="section_capsense_update"></a>
Update to Newer Versions</h1>
<p>Refer to the <a class="el" href="index.html#section_capsense_changelog">Changelog</a> to learn about the design impact of the newer version. Set up your environment in accordance with <a class="el" href="index.html#section_capsense_toolchain">Supported Software and Tools</a>.</p>
<p>Ensure:</p><ul>
<li>The specified version of the ModusToolbox&trade; Device Configurator tool and the Personality are used to re-generate the device configuration.</li>
<li>The specified version of the ModusToolbox&trade; CAPSENSE&trade; Configurator tool is used to re-generate the middleware configuration.</li>
<li>The toolchains are set up properly for your environment per the settings outlined in the Supported Software and Tools.</li>
<li>The project is re-built once the toolchains are configured and the configuration is completed.</li>
</ul>
<p>You might need to re-generate the configuration structures for either the device initialization code or the middleware initialization code.</p><ul>
<li>Launch the ModusToolbox&trade; Device Configurator tool and perform the File-&gt;Save command to re-generate the device initialization code.</li>
<li>From the ModusToolbox&trade; Device Configurator tool, launch the ModusToolbox&trade; CAPSENSE&trade; Configurator tool and perform the File-&gt;Save command to re-generate the middleware initialization code.</li>
</ul>
<h1><a class="anchor" id="section_capsense_memory_usage"></a>
Memory Usage</h1>
<p>The CAPSENSE&trade; middleware Flash and RAM memory consumption varies:</p><ul>
<li>marginally - depending on the compiler and device</li>
<li>significantly - depending on the project CAPSENSE&trade; configuration and number of APIs called by the application program.</li>
</ul>
<p>The table below provides the middleware total memory consumption for specific CAPSENSE&trade; configurations. Memory consumption for any custom design/configuration can be determined by analyzing a *.map file generated by the compiler.</p>
<p>The measurements were done with GCC compiler configured in the Release mode with optimization set for Size.</p>
<table class="doxtable">
<tr>
<th>Configuration:</th><th>Mode</th><th>Sensor Connection Type</th><th>Memory Type</th><th>Configuration 1</th><th>Configuration 2</th><th>Configuration 3</th><th>Configuration 4</th><th>Configuration 5</th><th>Configuration 6</th><th>Configuration 7</th><th>Configuration 8</th><th>Configuration 9 </th></tr>
<tr align="center">
<td rowspan="2">4th Gen</td><td rowspan="2">IntDrv</td><td rowspan="2">AMUX</td><td>Flash:</td><td>&lt; 6.1 kB</td><td>&lt; 8.7 kB</td><td>&lt; 11.8 kB</td><td>&lt; 5.6 kB</td><td>&lt; 6.3 kB</td><td>&lt; 8.0 kB</td><td>&lt; 9.2 kB</td><td>&lt; 9.6 kB</td><td>&lt; 19.2 kB </td></tr>
<tr align="center">
<td>SRAM:</td><td>&lt; 0.6 kB</td><td>&lt; 0.8 kB</td><td>&lt; 0.9 kB</td><td>&lt; 0.8 kB</td><td>&lt; 0.8 kB</td><td>&lt; 1.1 kB</td><td>&lt; 1.8 kB</td><td>&lt; 0.7 kB</td><td>&lt; 2.5 kB </td></tr>
<tr align="center">
<td rowspan="6">5th Gen</td><td rowspan="4">IntDrv</td><td rowspan="2">AMUX</td><td>Flash:</td><td>&lt; 8.2 kB</td><td>&lt; 11.0 kB</td><td>&lt; 12.4 kB</td><td>&lt; 8.2 kB</td><td>&lt; 9.6 kB</td><td>&lt; 10.7 kB</td><td>&lt; 11.8 kB</td><td>&lt; 12.6 kB</td><td>&lt; 16.3 kB </td></tr>
<tr align="center">
<td>SRAM:</td><td>&lt; 1.1 kB</td><td>&lt; 1.2 kB</td><td>&lt; 1.3 kB</td><td>&lt; 1.3 kB</td><td>&lt; 1.3 kB</td><td>&lt; 1.7 kB</td><td>&lt; 2.3 kB</td><td>&lt; 1.7 kB</td><td>&lt; 3.3 kB </td></tr>
<tr align="center">
<td rowspan="2">CTRL_MUX</td><td>Flash:</td><td>&lt; 7.9 kB</td><td>&lt; 10.9 kB</td><td>&lt; 12.0 kB</td><td>&lt; 7.8 kB</td><td>&lt; 9.7 kB</td><td>&lt; 10.3 kB</td><td>&lt; 11.4 kB</td><td>&lt; 12.4 kB</td><td>&lt; 16.0 kB </td></tr>
<tr align="center">
<td>SRAM:</td><td>&lt; 1.3 kB</td><td>&lt; 1.5 kB</td><td>&lt; 1.5 kB</td><td>&lt; 1.2 kB</td><td>&lt; 1.2 kB</td><td>&lt; 2.6 kB</td><td>&lt; 3.3 kB</td><td>&lt; 2.1 kB</td><td>&lt; 5.4 kB </td></tr>
<tr align="center">
<td rowspan="2">DMA</td><td rowspan="2">CTRL_MUX</td><td>Flash:</td><td>&lt; 8.7 kB</td><td>&lt; 11.7 kB</td><td>&lt; 13.0 kB</td><td>&lt; 8.6 kB</td><td>&lt; 10.4 kB</td><td>&lt; 11.0 kB</td><td>&lt; 12.1 kB</td><td>&lt; 13.1 kB</td><td>&lt; 16.7 kB </td></tr>
<tr align="center">
<td>SRAM:</td><td>&lt; 1.3 kB</td><td>&lt; 1.5 kB</td><td>&lt; 1.5 kB</td><td>&lt; 2.2 kB</td><td>&lt; 2.2 kB</td><td>&lt; 2.6 kB</td><td>&lt; 3.3 kB</td><td>&lt; 2.1 kB</td><td>&lt; 5.4 kB </td></tr>
<tr align="center">
<td rowspan="2">5th Gen Low Power</td><td rowspan="2">LP-AOS</td><td rowspan="2">AMUX</td><td>Flash:</td><td>&lt; 7.9 kB</td><td>&lt; 11.8 kB</td><td>&lt; 12.9 kB</td><td>&lt; 7.7 kB</td><td>&lt; 10.1 kB</td><td>&lt; 10.2 kB</td><td>&lt; 11.6 kB</td><td>&lt; 12.2 kB</td><td>&lt; 15.8 kB </td></tr>
<tr align="center">
<td>SRAM:</td><td>&lt; 1.2 kB</td><td>&lt; 1.4 kB</td><td>&lt; 1.5 kB</td><td>&lt; 2.1 kB</td><td>&lt; 2.1 kB</td><td>&lt; 2.5 kB</td><td>&lt; 3.2 kB</td><td>&lt; 1.5 kB</td><td>&lt; 4.8 kB </td></tr>
<tr>
<th colspan="13">Widgets </th></tr>
<tr>
<td colspan="4">CSD Button</td><td>3(10 sensors)</td><td>3(10 sensors)</td><td>3(10 sensors)</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>1(1 sensor)</td><td>1(1 sensor) </td></tr>
<tr>
<td colspan="4">CSD Matrix Buttons</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">CSD Slider</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">CSD Touchpad</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>1(8x8)</td><td>1(8x8) </td></tr>
<tr>
<td colspan="4">CSD Proximity</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">CSX Button</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">CSX Matrix Buttons</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>1(4x8)</td><td>1(4x8)</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">CSX Touchpad</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>1(9x4)</td><td>1(9x4)</td><td>&#160;</td><td>1(8x8) </td></tr>
<tr>
<th colspan="13">Features </th></tr>
<tr>
<td colspan="4">Gesture</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Ballistic Multiplier</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Centroid Type</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Supported fingers on touchpad</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Shield</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>enabled </td></tr>
<tr>
<td colspan="4">SmartSense</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">CSD auto-calibration</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">CSX auto-calibration</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Self-test</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<th colspan="13">Raw Count Filters </th></tr>
<tr>
<td colspan="4">IIR</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>enabled</td><td>enabled </td></tr>
<tr>
<td colspan="4">Median</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Average</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<th colspan="13">Position Filters </th></tr>
<tr>
<td colspan="4">IIR</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Median</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Average</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Adaptive IIR</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160; </td></tr>
<tr>
<td colspan="4">Jitter</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>&#160;</td><td>enabled</td><td>&#160;</td><td>&#160; </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Configuration considerations:<ul>
<li>To select values for the Scan mode and Sensor connection method parameters (for the fifth-generation of the CAPSENSE&trade; HW) navigate to the Advanced tab in the CAPSENSE&trade; Configurator tool, and then select the General settings sub-tab.</li>
<li>For the forth-generation of the CAPSENSE&trade; HW, the IntDrv mode with the AMUX sensor connection type is available only.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="section_capsense_misra"></a>
MISRA-C:2012 Compliance</h1>
<p>This page describes MISRA-C:2012 compliance and deviations for the CAPSENSE&trade; middleware.</p>
<p>MISRA stands for Motor Industry Software Reliability Association. The MISRA specification covers a set of 10 mandatory rules, 110 required rules and 39 advisory rules that apply to firmware design and has been put together by the Automotive Industry to enhance the quality and robustness of the firmware code embedded in automotive devices.</p>
<h2><a class="anchor" id="subsection_capsense_misra-mw"></a>
CAPSENSE™ Middleware Deviation</h2>
<table class="doxtable">
<tr>
<th>Rule ID </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>Directive 4.8 </td><td>If a pointer to a structure or union is never dereferenced within a translation unit, then the implementation of the object should be hidden.  </td><td>Advisory. The middleware library consists of several modules. One of them is CapSense Data Structure. All communication between the other modules is performed through CapSense Data Structure.   </td></tr>
<tr>
<td>Rule 2.3 </td><td>A project should not contain unused type declarations.  </td><td>Advisory. The middleware library provides API to the hardware. The type is part of API, which is defined for application-level only.   </td></tr>
<tr>
<td>Rule 2.5 </td><td>A project should not contain unused macro declarations.  </td><td>Advisory. The middleware library provides API to the hardware. The macro is part of API, which is defined for application-level only.   </td></tr>
<tr>
<td>Rule 5.1 </td><td>External identifiers shall be distinct.  </td><td>Toolchains from Supported Software and Tools documentation section are verified to work with functions, names of which have similar first 31 symbols.   </td></tr>
<tr>
<td>Rule 5.4 </td><td>Macro identifiers shall be distinct.  </td><td>Toolchains from Supported Software and Tools documentation section are verified to work with macros, names of which have similar first 31 symbols.   </td></tr>
<tr>
<td>Rule 5.6 </td><td>A typedef name shall be a unique identifier.  </td><td>During the code analysis, the same source files are compiled multiple times with device-specific options. All typedef names are unique for each specific run.   </td></tr>
<tr>
<td>Rule 5.8 </td><td>Identifiers that define objects or functions with external linkage shall be unique.  </td><td>During the code analysis, the same source files are compiled multiple times with device-specific options. All object and function identifiers are unique for each specific run.   </td></tr>
<tr>
<td>Rule 5.9 </td><td>Identifiers that define objects or functions with internal linkage should be unique.  </td><td>Advisory. During the code analysis, the same source files are compiled multiple times with device-specific options. All object and function identifiers are unique for each specific run.   </td></tr>
<tr>
<td>Rule 8.3 </td><td>All declarations of an object or function shall use the same names and type qualifiers.  </td><td>During the code analysis, the same source files are compiled multiple times with device-specific options. All object and function identifiers are unique for each specific run.   </td></tr>
<tr>
<td>Rule 8.5 </td><td>An external object or function shall be declared once in one and only one file.  </td><td>During the code analysis, the same source files are compiled multiple times with device-specific options. All object and function identifiers are unique for each specific run.   </td></tr>
<tr>
<td>Rule 8.6 </td><td>An identifier with external linkage shall have exactly one external definition.  </td><td>During the code analysis, the same source files are compiled multiple times with device-specific options. All object and function identifiers are unique for each specific run.   </td></tr>
<tr>
<td>Rule 8.7 </td><td>Functions and objects should not be defined with external linkage if they are referenced in only one translation unit.  </td><td>Advisory. During the code analysis, the same source files are compiled multiple times with device-specific options. All object and function identifiers are unique for each specific run.   </td></tr>
<tr>
<td>Rule 8.13 </td><td>A pointer should point to const-qualified type whenever possible.  </td><td>Advisory. During the code analysis, the same source files are compiled multiple times with device-specific options. A function argument can be const for some specific run.   </td></tr>
<tr>
<td>Rule 11.4 </td><td>A conversion should not be performed between a pointer to object and an integer type.  </td><td>Advisory. There is an issue with a SYSCLK driver (IFXID-10550), due to which integer type is cast to an object pointer type. Code is manually checked and reviewed to be safe.   </td></tr>
<tr>
<td>Rule 11.5 </td><td>A conversion should not be performed from pointer to void into pointer to object.  </td><td>Advisory. The cast from void pointer to an object pointer does not have any unintended effect, as it is a consequence of the definition of a structure based on function pointers.   </td></tr>
<tr>
<td>Rule 14.2 </td><td>A for loop shall be well-formed.  </td><td>The third clause of the for loop is empty to improve execution time.   </td></tr>
<tr>
<td>Rule 18.4 </td><td>The +, -, += and -= operators should not be applied to an expression of pointer type.  </td><td>Advisory. There are several instances of pointer arithmetic in drivers. They cannot be avoided, so are manually checked and reviewed to be safe.   </td></tr>
</table>
<h2><a class="anchor" id="subsection_capsense_misra-cfg"></a>
CAPSENSE™ Configurator Tool Generated Sources Deviation</h2>
<table class="doxtable">
<tr>
<th>Rule ID </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>Rule 3.1 </td><td>The character sequences / * and / / shall not be used within a comment. </td><td>Using of the special comment symbols is need for Doxygen comment support, it does not have any impact on functionality.   </td></tr>
<tr>
<td>Rule 8.4 </td><td>A compatible declaration shall be visible when an object or function with external linkage is defined. </td><td>The CAPSENSE&trade; middleware library consists of several modules. One of them is CAPSENSE&trade; Built-in Self Test (BIST). All the BIST variables are used in other data structures and accessed using pointers.  </td></tr>
<tr>
<td>Rule 11.4 </td><td>A conversion should not be performed between a pointer to object and an integer type. </td><td>Advisory. There are several instances of pointer conversions in Generated Source. They are manually checked and reviewed to be safe.  </td></tr>
</table>
<h1><a class="anchor" id="section_capsense_errata"></a>
Errata</h1>
<p>This section lists the known problems with the CAPSENSE&trade; middleware.</p>
<table class="doxtable">
<tr>
<th>ID</th><th>Known Issue</th><th>Workaround </th></tr>
<tr>
<td>319100 </td><td>GPIO simultaneous operation with unrestricted strength and frequency creates noise that can affect CAPSENSE&trade; operation. This issue is applicable for the fourth CAPSENSE&trade; generation devices.  </td><td>For detail, refer to the errata section of the device datasheet.   </td></tr>
<tr>
<td>3159 </td><td>Scanning a sensor with low capacitance (about 8pF and less) with low frequency (around 300kHz and less) might lead to raw count variation from scan to scan. This issue is applicable for the fourth CAPSENSE&trade; generation devices.  </td><td>There are several possible workarounds:<ol type="1">
<li>Increase the Scan resolution.</li>
<li>Increase the Sense clock frequency. For the best results, perform scanning with as high as possible Sense clock frequency.</li>
<li>If shield is required for a design, enable the shield tank (Csh) capacitor.</li>
<li>Increase the sensor capacitance by changing its layout or introduce extra capacitor between the sensor pin and ground.</li>
<li>Increase number of Fine initialization cycles. Open the cycfg_capsense.c file and modify the .csdFineInitTime field of the cy_capsense_commonConfig structure.</li>
<li>Increase the CSD init switch resistance. Open the cycfg_capsense.c file and update the .csdInitSwRes field of the cy_capsense_commonConfig structure with the CY_CAPSENSE_INIT_SW_RES_HIGH value.   </li>
</ol>
</td></tr>
<tr>
<td>17158 </td><td>ISX scan followed by BIST measurement or with other sensing methods CSD &amp; CSX introduces drift in raw count. This impacts the performance and accuracy of the ISX scanning.  </td><td>There are several possible workarounds:<ol type="1">
<li>Use ISX in standalone mode (without other sensing methods)</li>
<li>Use ISX without built-in self-test (BIST)</li>
<li>Configure Inactive sensor connection parameter to High-Z</li>
<li>Introduce a dummy scan before ISX.   </li>
</ol>
</td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Refer to the "Errata" section of the device datasheet to get information about the known problems related to the CAPSENSE&trade; HW IP block.</dd></dl>
<h1><a class="anchor" id="section_capsense_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td rowspan="9">7.0.0 </td><td colspan="2"><em><b> This version is compatible to the v6.10.0, however due to switching to MTB 3.5, new Device-DB, PDL, etc. a migration of projects created with past version might be not possible. In this case a project should be newly created. Also, if you use the CAPSENSE&trade; middleware v7.0.0, you must use the CAPSENSE&trade; Configurator v8.0.0 tool or later. This MW version is not compatible with the previous Configurator tool versions. </b></em>  </td></tr>
<tr>
<td>Added support of PSOC&trade; 4100T Plus device family.  </td><td>New device support.   </td></tr>
<tr>
<td>Added scaling to CDAC codes in the manual mode for the CSD sensing method by using trim registers.  </td><td>New feature support, improved manufacturing tolerance.   </td></tr>
<tr>
<td>Added scaling to measured sensor, electrode and shield capacitances in built-in self-test library.  </td><td>New feature support, improved manufacturing tolerance.   </td></tr>
<tr>
<td>Redefined CDAC LSB from 8.86fF to 8.87fF.  </td><td>Improved accuracy.   </td></tr>
<tr>
<td>Fixed Shield electrode capacitance measurement inside built-in self-test library. Wrong measurement happens when the first sensor in the configuration does not belong to CSD sensing method.  </td><td>Defect fixing.   </td></tr>
<tr>
<td>Removed intermediate verification of CDAC auto-calibration status.  </td><td>Supporting customer specific use cases.   </td></tr>
<tr>
<td>Fixed CDAC auto-calibration corner case when auto and manual modes are combined for the fifth-generation low power CAPSENSE&trade;.  </td><td>Defect fixing.   </td></tr>
<tr>
<td>Fixed HW configuration for inactive sensor connection set to active shield in built-in self-test library for sensor capacitance measurement for fifth-generation CAPSENSE&trade;.  </td><td>Defect fixing.   </td></tr>
<tr>
<td rowspan="9">6.10.0 </td><td colspan="2"><em><b> This version is compatible to the v5.0, however due to switching to MTB 3.4, new Device-DB, PDL, compiler versions, etc. a migration of projects created with past version might be not possible. In this case a project should be newly created. Also, if you use the CAPSENSE&trade; middleware v6.10.0, you must use the CAPSENSE&trade; Configurator v7.10.0 tool or later. This MW version is not compatible with the previous Configurator tool versions. </b></em>  </td></tr>
<tr>
<td>Added Liquid level sensing method for fifth-generation low power device.  </td><td>Feature enhancement.    </td></tr>
<tr>
<td>Added Inductive sensing method for fifth-generation low power device.  </td><td>Feature enhancement.   </td></tr>
<tr>
<td>Added auto-tuning for Inductive sensing widgets. The ISX auto-tuning feature is at the Beta readiness level. It is not fully validated and might not work as expected. Use it to start working on the ISX tuning.  </td><td>Feature enhancement.   </td></tr>
<tr>
<td>Added Common mode filter.  </td><td>Feature enhancement.   </td></tr>
<tr>
<td>Added Multi-pin Selection option for fifth-generation low power device.  </td><td>Feature enhancement.   </td></tr>
<tr>
<td>Increased supported sensor capacitance range to 275pF and total Shield electrode capacitance range to 1160pF (CAPSENSE&trade; fifth-generation low power device).  </td><td>Feature enhancement.   </td></tr>
<tr>
<td>Fixed some non-functional MISRA violations.  </td><td>Defect fixing.   </td></tr>
<tr>
<td>Fixed documentation.  </td><td>User experience improvement.   </td></tr>
<tr>
<td>6.0.0 </td><td colspan="2"><em><b> This release is for internal purpose. </b></em>   </td></tr>
<tr>
<td rowspan="13">5.0 </td><td colspan="2"><em><b> This version is not backward compatible with the previous version due to re-designed CDAC auto-calibration. We tried to keep the established API, but your design may need to be updated to operate with CAPSENSE&trade; middleware v5.0. Also, if you use the CAPSENSE&trade; middleware v5.0, you must use the CAPSENSE&trade; Configurator v6.20 tool or later. This MW version is not compatible with the previous Configurator tool versions. </b></em>   </td></tr>
<tr>
<td>Re-designed CDAC auto-calibration algorithm for the fifth-generation LP devices  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Added auto-selection mode of CIC2 decimation rate for the fifth-generation low power devices  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Added auto-selection mode of CDAC Dither scale value for the fifth-generation and fifth-generation low power devices  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Added the HW IIR Filter initialization function <a class="el" href="group__group__capsense__low__level.html#ga99c4c3b3a577706d47fb4b01ca8d29c0" title="Initializes (or re-initializes) the hardware IIR filter for all slots. ">Cy_CapSense_ScanInitializeHwIirAllSlots()</a> and <a class="el" href="group__group__capsense__low__level.html#gac8445556444b88df5ecab63085e698c7" title="Initializes (or re-initializes) the hardware IIR filter for specified slots. ">Cy_CapSense_ScanInitializeHwIirSlots()</a> for fifth-generation low power devices  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Corrected the low power widget scanning flow by excluding waking up at a signal detection - only the end of the frame interrupt is kept. Condition: multiple low power sensors. This will avoid multiple interrupt generation and in some cases prevent the device from hanging.  </td><td>Defect fixing   </td></tr>
<tr>
<td>Corrected description of the <a class="el" href="structcy__stc__capsense__position__t.html" title="Declares position structure that keep information of a single touch. ">cy_stc_capsense_position_t</a> structure  </td><td>Defect fixing   </td></tr>
<tr>
<td>Removed Epilogue cycles from the maximum Raw Counts definition  </td><td>Defect fixing   </td></tr>
<tr>
<td>Hidden a Multi-phase Self feature for fifth-generation low power devices  </td><td>Defect fixing   </td></tr>
<tr>
<td>Disabled the External Frame Start in the Cy_CapSense_InitializeMaxRaw() function for the fifth-generation devices  </td><td>Defect fixing   </td></tr>
<tr>
<td>Corrected description of the BIST measurement function  </td><td>Defect fixing   </td></tr>
<tr>
<td>Corrected description of the <a class="el" href="structcy__stc__capsense__touch__t.html" title="Declares touch structure used to store positions of Touchpad, Matrix buttons, Slider and Liquid Level...">cy_stc_capsense_touch_t</a> structure  </td><td>Defect fixing   </td></tr>
<tr>
<td>Updated description of the software watchdog time calculation for the fifth-generation devices  </td><td>Defect fixing   </td></tr>
<tr>
<td rowspan="17">4.0 </td><td colspan="2"><em><b> This version is not backward compatible with the previous version due to fifth-generation low power devices support implementation and defect fixes. We tried to keep the established API, but your design may need to be updated to operate with CAPSENSE&trade; middleware v4.0. </b></em>   </td></tr>
<tr>
<td>Added CAPSENSE&trade; fifth-generation low power device support  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Added the Inductive sensing method support (ISX)  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Added the feature of enabling/disabling widgets and built-in self-test working/non-working widgets  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Added Multi-phase Self support for fifth-generation low power devices  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Updated the CIC2 functionality for the fifth-generation devices to be consistent with the fifth-generation low power devices.  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Added saturated scan during CAPSENSE&trade; initialization to measure maximum rawcounts precisely instead of using equations.  </td><td>Feature enhancement   </td></tr>
<tr>
<td>Changed the meaning of bit[2] of the widget status register in the <a class="el" href="structcy__stc__capsense__widget__context__t.html" title="Widget context structure. ">cy_stc_capsense_widget_context_t</a>: logical 1 means the widget is enabled. Replaced CY_CAPSENSE_WD_DISABLE_MASK with CY_CAPSENSE_WD_ENABLE_MASK for consistency  </td><td>Defect fixing   </td></tr>
<tr>
<td>Swapped the position of bit[0] and bit[1] of the sensor status register in the <a class="el" href="structcy__stc__capsense__sensor__context__t.html" title="Sensor context structure. ">cy_stc_capsense_sensor_context_t</a>: bit[0] reports the Proximity sensor status, bit[1] - the regular sensor status. Updated values of CY_CAPSENSE_SNS_PROX_STATUS_MASK and CY_CAPSENSE_SNS_TOUCH_STATUS_MASK macros.  </td><td>Defect fixing   </td></tr>
<tr>
<td>Renamed cy_stc_active_scan_sns_t to <a class="el" href="structcy__stc__capsense__active__scan__sns__t.html" title="Declares active sensor details. ">cy_stc_capsense_active_scan_sns_t</a>.  </td><td>Following naming convention. Defect fixing   </td></tr>
<tr>
<td>Renamed cy_stc_msc_channel_config_t to <a class="el" href="structcy__stc__capsense__channel__config__t.html" title="Declares MSC channel (HW block) configuration. ">cy_stc_capsense_channel_config_t</a>, updated field names  </td><td>Following naming convention. Updated for consistency between fifth-generation and fifth-generation low power devices   </td></tr>
<tr>
<td>Renamed Cy_CapSense_ProcessWidgetMptxDeconvolution() to <a class="el" href="group__group__capsense__low__level.html#ga1460eefc048d987a811dbb7deba56e0f" title="Performs raw count deconvolution for the specified widget: ">Cy_CapSense_ProcessWidgetMpDeconvolution()</a>  </td><td>Updated function name to better reflect its purpose   </td></tr>
<tr>
<td>Renamed Cy_CapSense_SetCalibrationTargets() to <a class="el" href="group__group__capsense__low__level.html#ga2f9c2fe584e7038a923d28bf445205ee" title="Sets the CapDAC auto-calibration raw count target for CSD, CSX or ISX widgets. ">Cy_CapSense_SetCalibrationTarget()</a>, updated function interface and implementation to cover all sensing methods.  </td><td>Feature enhancement.   </td></tr>
<tr>
<td>Fixed incorrect shield pins configuration for <a class="el" href="group__group__capsense__low__level.html#ga3bf9894c313d4ffce1be841141d6b8e5" title="Measures the specified CSD sensor / CSX electrode capacitance in femtofarads. ">Cy_CapSense_MeasureCapacitanceSensor()</a> function for fourth-generation devices  </td><td>Defect fixing   </td></tr>
<tr>
<td>Updater measurement error handling for <a class="el" href="group__group__capsense__low__level.html#gaff014dbf80fc7824a7e6e3e377d2942f" title="Measures shield electrode capacitances in femtofarads. ">Cy_CapSense_MeasureCapacitanceShieldElectrode()</a>, <a class="el" href="group__group__capsense__low__level.html#gadb467c284dc3fea4c7347a25c5ff57df" title="Measures the specified slot sensor capacitance in femtofarads. ">Cy_CapSense_MeasureCapacitanceSlotSensors()</a> and <a class="el" href="group__group__capsense__low__level.html#ga23f23f4e684b25788f999851f20aa58c" title="Measures the specified CSD sensor / CSX electrode capacitance in femtofarads. ">Cy_CapSense_MeasureCapacitanceSensorElectrode()</a> functions for fifth-generation devices  </td><td>Defect fixing   </td></tr>
<tr>
<td>Optimized <a class="el" href="structcy__stc__capsense__common__config__t.html" title="Common configuration structure. ">cy_stc_capsense_common_config_t</a> structure (renamed fields, removed unused fields)  </td><td>User experience improvement   </td></tr>
<tr>
<td>Added Long Press gesture  </td><td>Feature enhancement   </td></tr>
<tr>
<td>3.0.1 </td><td>Fixed calls of Cy_DMAC_Descriptor_SetDstAddress() and Cy_DMAC_Descriptor_SetSrcAddress() accordingly to changes in DMAC v1.20 mtb-pdl-cat2 driver.  </td><td>Defect fixing   </td></tr>
<tr>
<td rowspan="12">3.0 </td><td colspan="2"><p class="starttd"><em><b> This version is not backward compatible with the previous version due to implemented memory consumption optimization. We tried to keep the established API, but your design may need to be updated to operate with CAPSENSE&trade; middleware v3.0.</b></em></p>
<p class="endtd"><em><b> Also, if you use the CAPSENSE&trade; middleware v3.0 version then you must use the CAPSENSE&trade; Configurator v4.0 tool or later. This MW version is not compatible with the previous Configurator tool versions. </b></em>  </p>
</td></tr>
<tr>
<td>Added fifth-generation CAPSENSE&trade; device support which includes but not limited:<ul>
<li>Scanning mode: DMA and Interrupt Driven</li>
<li>Sensor connection method: Analog mux bus and Control mux bus</li>
<li>Re-designed multi-frequency scan feature</li>
<li>Multi-phase TX feature</li>
<li>Improved signal-to-noise ratio</li>
<li>Improved refresh rate  </li>
</ul>
</td><td>New CAPSENSE&trade; MSC platform covering  </td></tr>
<tr>
<td colspan="2"><em><b>The following rows show changes related to fourth-generation CAPSENSE&trade;</b></em>  </td></tr>
<tr>
<td>Removed usage of deprecated return error and status codes, cy_status enum was replaced with the cy_capsense_status_t variable </td><td>Defect fixing  </td></tr>
<tr>
<td>Removed usage of deprecated types, such as uint32 and uint16 </td><td>Defect fixing  </td></tr>
<tr>
<td>Changed the default IDAC gain index for the CSX auto-calibration to the configured one </td><td>Defect fixing  </td></tr>
<tr>
<td>The following functions were made obsolete:<ul>
<li>Cy_CapSense_CSDConnectSns()</li>
<li>Cy_CapSense_CSDDisconnectSns()</li>
<li>Cy_CapSense_CSXConnectRx()</li>
<li>Cy_CapSense_CSXConnectTx()</li>
<li>Cy_CapSense_CSXDisconnectRx()</li>
<li>Cy_CapSense_CSXDisconnectTx()</li>
<li>Cy_CapSense_CalibrateAllCsdWidgets()</li>
<li>Cy_CapSense_CalibrateAllCsxWidgets()  </li>
</ul>
</td><td>User experience improvement  </td></tr>
<tr>
<td>For fourth-generation CAPSENSE&trade; devices callbacks were moved from ptrCommonContext to ptrInternalContext structure </td><td>User experience improvement  </td></tr>
<tr>
<td>Updated the description of the <a class="el" href="group__group__capsense__high__level.html#gab1f1514db0566e14ba20fd8647ecb3ad" title="Runs built-in self-tests specified by the test enable mask. ">Cy_CapSense_RunSelfTest()</a> function  </td><td>Documentation defect fixing  </td></tr>
<tr>
<td>Specified measurement units in the following function descriptions:<ul>
<li><a class="el" href="group__group__capsense__low__level.html#ga3bf9894c313d4ffce1be841141d6b8e5" title="Measures the specified CSD sensor / CSX electrode capacitance in femtofarads. ">Cy_CapSense_MeasureCapacitanceSensor()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#gacc9c800180cd40a8ca3e53321d6a249b" title="Measures shield electrode capacitance in femtofarads. ">Cy_CapSense_MeasureCapacitanceShield()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga80ad1c421ea794bd493bb37e76c48a2b" title="Measures the capacitance in picofarads of the specified CAPSENSE™ integration (external) capacitor...">Cy_CapSense_MeasureCapacitanceCap()</a>  </li>
</ul>
</td><td>Documentation defect fixing </td></tr>
<tr>
<td>Added call of the <a class="el" href="group__group__capsense__high__level.html#gaf9436a7ec9b18880dbc046e91462710b" title="Resumes the middleware after System Deep Sleep. ">Cy_CapSense_Wakeup()</a> function to the registered callback in the <a class="el" href="group__group__capsense__high__level.html#ga9c47887109b22521eba45109b7a27f31" title="Handles CPU active to System Deep Sleep power mode transition for the CAPSENSE™ middleware. ">Cy_CapSense_DeepSleepCallback()</a> function </td><td>Improved robustness of a sensing module  </td></tr>
<tr>
<td>Added a possibility to enable/disable independent features of BIST module </td><td>Expanded flexibility  </td></tr>
<tr>
<td rowspan="9">2.10 </td><td>Added Built-in Self-test (BIST) library </td><td>Support Class B (IEC-60730), safety integrity-level compliant design  </td></tr>
<tr>
<td>Improved the Csh and Cmod coarse initialization functionality. </td><td>Feature enhancement  </td></tr>
<tr>
<td>Improved the shield performance when Csh is enabled </td><td>Feature enhancement  </td></tr>
<tr>
<td>Fixed <a class="el" href="group__group__capsense__low__level.html#ga31834a3fce1f5b57c72107b419626bab" title="Starts a conversion on the pre-configured sensor. ">Cy_CapSense_ScanExt()</a> operation </td><td>Defect fixing  </td></tr>
<tr>
<td>Fixed the bug in the <a class="el" href="group__group__capsense__low__level.html#gaf51fd91df09631045f83396237395777" title="Sets the state (drive mode and HSIOM state) of the GPIO used by a sensor. ">Cy_CapSense_SetPinState()</a> function </td><td>Defect fixing  </td></tr>
<tr>
<td>Optimized software watch-dog values used in monitoring CAPSENSE&trade; scanning duration </td><td>User experience improvement  </td></tr>
<tr>
<td>Improved IDAC auto-calibration </td><td>Operation accuracy increasing  </td></tr>
<tr>
<td>Added the following functions:<ul>
<li><a class="el" href="group__group__capsense__low__level.html#gaa89c8ed15cddd778c2232c85300eb02d" title="Gets a value of the specified parameter from the cy_capsense_tuner structure. ">Cy_CapSense_GetParam()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga6049654627a08e866ebe5e93ac414177" title="Sets a new value for the specified parameter in cy_capsense_tuner structure. ">Cy_CapSense_SetParam()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga2de812825cd421ee05fec733206e157a" title="Calculates CRC for the specified buffer and length. ">Cy_CapSense_GetCRC()</a>  </li>
</ul>
</td><td>Feature enhancement  </td></tr>
<tr>
<td>Changed the type of context argument to const in the following functions:<ul>
<li>Cy_CapSense_CSDConnectSns()</li>
<li>Cy_CapSense_CSXConnectRx()</li>
<li>Cy_CapSense_CSXConnectTx()</li>
<li>Cy_CapSense_CSXDisconnectRx()</li>
<li>Cy_CapSense_CSXDisconnectTx()</li>
<li><a class="el" href="group__group__capsense__low__level.html#gaf51fd91df09631045f83396237395777" title="Sets the state (drive mode and HSIOM state) of the GPIO used by a sensor. ">Cy_CapSense_SetPinState()</a>  </li>
</ul>
</td><td>Defect fixing  </td></tr>
<tr>
<td rowspan="6">2.0 </td><td>Added memory usage section to the CAPSENSE&trade; API Ref Guide </td><td>User experience improvement  </td></tr>
<tr>
<td>Updated documentation </td><td>User experience improvement  </td></tr>
<tr>
<td>Added the errata section to the CAPSENSE&trade; API Ref Guide </td><td>User experience improvement  </td></tr>
<tr>
<td>CAPSENSE&trade; MW sources are enclosed with the conditional compilation to ensure a successful compilation for non-CAPSENSE&trade;-capable devices </td><td>Fixing a compilation error for non CAPSENSE&trade;-capable devices  </td></tr>
<tr>
<td>Optimized flash memory consumption based on user's configuration </td><td>Flash foot-print optimization  </td></tr>
<tr>
<td>Renamed function Cy_CapSense_CheckCommandIntegrity() to <a class="el" href="group__group__capsense__high__level.html#ga1f0fdedcec1ad936f5e9e4ae28f17274" title="Checks command format, header, tail, CRC, etc. ">Cy_CapSense_CheckTunerCmdIntegrity()</a> </td><td>User experience improvement  </td></tr>
<tr>
<td rowspan="2">1.20 </td><td>Added Arm Compiler 6 support </td><td>Feature enhancement  </td></tr>
<tr>
<td>Changed the hierarchy of the binary files folders </td><td>MBED OS compatibility  </td></tr>
<tr>
<td rowspan="6">1.1 </td><td><p class="starttd">The following functions made obsolete:</p><ul>
<li>Cy_CapSense_CSDSetupWidget()</li>
<li>Cy_CapSense_CSDSetupWidgetExt()</li>
<li>Cy_CapSense_CSDScan()</li>
<li>Cy_CapSense_CSDScanExt()</li>
<li>Cy_CapSense_CSDCalibrateWidget()</li>
<li>Cy_CapSense_CSXSetupWidget()</li>
<li>Cy_CapSense_CSXSetupWidgetExt()</li>
<li>Cy_CapSense_CSXScan()</li>
<li>Cy_CapSense_CSXScanExt()</li>
<li>Cy_CapSense_CSXCalibrateWidget()</li>
</ul>
<p class="endtd">Two simple functions introduced to replace the listed above functions:</p><ul>
<li><a class="el" href="group__group__capsense__low__level.html#gaf43c0cf61a95f11a5981f82f5b0d4e86" title="Performs extended initialization for the specified widget and also performs initialization required f...">Cy_CapSense_SetupWidgetExt()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga31834a3fce1f5b57c72107b419626bab" title="Starts a conversion on the pre-configured sensor. ">Cy_CapSense_ScanExt()</a>  </li>
</ul>
</td><td>User experience improvement  </td></tr>
<tr>
<td>Fixed the shield operation when Csh is disabled </td><td>Defect fixing  </td></tr>
<tr>
<td>Fixed the implementation of the position filtering for the Radial Slider widget </td><td>Defect fixing  </td></tr>
<tr>
<td>Added restoring hardware to its default state in the <a class="el" href="group__group__capsense__high__level.html#ga7b8a365213dde3be6c6932dc23fdcee6" title="Stops the middleware operation and releases the CAPSENSE™ captured HW blocks. ">Cy_CapSense_DeInit()</a> implementation </td><td>Defect fixing  </td></tr>
<tr>
<td>Added the capability to enable the shield electrode without dedicated electrodes </td><td>Feature enhancement  </td></tr>
<tr>
<td>Added support of a protocol-agnostic tuner interface (UART, SPI, etc.) </td><td>Feature enhancement  </td></tr>
<tr>
<td>1.0 </td><td>The initial version  </td><td></td></tr>
</table>
<h1><a class="anchor" id="section_capsense_more_information"></a>
More Information</h1>
<p>Important information about the CAPSENSE&trade;-technology overview, appropriate CYPRESS&trade; device from Infineon for the design, CAPSENSE&trade; system and sensor design guidelines, different interfaces and tuning guidelines necessary for a successful design of a CAPSENSE&trade; system is available in the Getting Started with CAPSENSE&trade; document and the product-specific CAPSENSE&trade; design guide. Infineon Technologies highly recommends starting with these documents. They can be found on the Infineon Technologies web site at www.infineon.com.</p>
<p>For more information, refer to the following documents:</p>
<ul>
<li>CAPSENSE&trade; Overview:<ul>
<li><a href="https:/\/www.infineon.com/ModusToolboxCapSenseConfig"><b>ModusToolbox&trade; CAPSENSE&trade; Configurator Tool Guide</b></a></li>
<li><a href="https:/\/www.infineon.com/ModusToolboxCapSenseTuner"><b>ModusToolbox&trade; CAPSENSE&trade; Tuner Tool Guide</b></a></li>
<li><a href="https:/\/www.infineon.com/dgdl/Infineon-AN85951_PSOC_4_and_PSOC_6_MCU_CapSense_Design_Guide-ApplicationNotes-v30_00-EN.pdf?fileId=8ac78c8c7cdc391c017d0723535d4661"><b>CAPSENSE&trade; Design Guide</b></a></li>
</ul>
</li>
<li>ModusToolbox&trade; Overview:<ul>
<li><a href="https:/\/www.infineon.com/cms/en/design-support/tools/sdk/modustoolbox-software"><b>ModusToolbox&trade; Software Environment, Quick Start Guide, Documentation, and Videos</b></a></li>
<li><a href="https:/\/www.infineon.com/ModusToolboxDeviceConfig"><b>ModusToolbox&trade; Device Configurator Tool Guide</b></a></li>
</ul>
</li>
<li>Infineon Technologies Kits and Code Examples:<ul>
<li><a href="https:/\/github.com/Infineon/mbed-os-example-capsense"><b>CAPSENSE&trade; buttons and slider for PSOC&trade; 6 MCU with Mbed OS</b></a></li>
<li><a href="https:/\/github.com/Infineon/mtb-example-psoc6-capsense-buttons-slider-freertos"><b>CAPSENSE&trade; Middleware Code Example for FreeRTOS</b></a></li>
<li><a href="https:/\/www.infineon.com/cms/en/product/evaluation-boards/cy8ckit-145-40xx"><b>CY8CKIT-145-40XX PSOC&trade; 4000S CAPSENSE&trade; Prototyping Kit</b></a></li>
<li><a href="https:/\/www.infineon.com/cms/en/product/evaluation-boards/cy8ckit-149"><b>CY8CKIT-149 PSOC&trade; 4100S Plus Prototyping Kit</b></a></li>
</ul>
</li>
<li>General Information:<ul>
<li><a href="https:/\/infineon.github.io/mtb-pdl-cat1/pdl_api_reference_manual/html/index.html"><b>CAT1 PDL API Reference</b></a></li>
<li><a href="https:/\/infineon.github.io/mtb-pdl-cat2/pdl_api_reference_manual/html/index.html"><b>CAT2 PDL API Reference</b></a></li>
<li><a href="http:/\/www.infineon.com/cms/en/search.html#!term=AN210781&amp;view=downloads"><b>AN210781 Getting Started with PSOC&trade; 6 MCU with Bluetooth Low Energy (BLE) Connectivity</b></a></li>
<li><a href="http:/\/www.infineon.com/cms/en/search.html#!term=AN215671&amp;view=downloads"><b>AN215671 PSOC&trade; 6 MCU firmware design for BLE applications</b></a></li>
<li><a href="https:/\/www.infineon.com/cms/en/search.html#!term=psoc%206%20TRM&amp;view=downloads"><b>PSOC&trade; 6 Technical Reference Manual</b></a></li>
<li><a href="https:/\/www.infineon.com/cms/en/search.html#!term=psoc%204000S%20TRM&amp;view=downloads"><b>PSOC&trade; 4000S Family: PSOC&trade; 4 Architecture Technical Reference Manual (TRM)</b></a></li>
<li><a href="https:/\/www.infineon.com/cms/en/search.html#!term=psoc%204100S%20TRM&amp;view=downloads"><b>PSOC&trade; 4100S and PSOC&trade; 4100S Plus: PSOC&trade; 4 Architecture Technical Reference Manual (TRM)</b></a></li>
<li><a href="http:/\/www.infineon.com/cms/en/search.html#!term=PSOC%2063%20datasheet&amp;view=downloads"><b>PSOC&trade; 63 with BLE Datasheet Programmable System-on-Chip datasheet</b></a></li>
<li><a href="https:/\/github.com/Infineon"><b> Infineon Technologies GitHub</b></a></li>
<li><a href="http:/\/www.infineon.com"><b>Infineon Technologies</b></a></li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The links to another software component's documentation (middleware and PDL) point to GitHub to the latest available version of the software. To get documentation of the specified version, download from GitHub and unzip the component archive. The documentation is available in the <em>docs</em> folder. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>CAPSENSE™ Middleware Library 7.0.0</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
