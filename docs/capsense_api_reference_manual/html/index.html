<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cypress CapSense Middleware Library: Cypress CapSense Middleware Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress CapSense Middleware Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Cypress CapSense Middleware Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>CapSense is a Cypress capacitive sensing solution. Capacitive sensing can be used in a variety of applications and products where conventional mechanical buttons can be replaced with sleek human interfaces to transform the way users interact with electronic systems. These include home appliances, and automotive, IoT, and industrial applications. CapSense supports multiple interfaces (widgets) using both CSX and CSD sensing methods with robust performance.</p>
<p>CapSense has become a popular technology to replace conventional mechanical- and optical-based user interfaces. There are fewer parts involved, which saves cost and increases reliability with no wear-and-tear. The main advantages of CapSense compared with other solutions are: robust performance in harsh environmental conditions and rejection of a wide range of external noise sources.</p>
<p>Use CapSense for:</p><ul>
<li>Touch and gesture detection for various interfaces</li>
<li>Proximity detection for innovative user experiences and low-power optimization</li>
<li>Contactless liquid-level sensing in a variety of applications</li>
<li>Touch-free operations in hazardous materials</li>
</ul>
<h1><a class="anchor" id="section_capsense_general"></a>
General Description</h1>
<p>The CSD HW block enables multiple sensing capabilities on PSoC devices including self-cap and mutual-cap capacitive touch sensing solution, a 10-bit ADC, IDAC, and Comparator. The CSD driver is a low-level peripheral driver, a wrapper to manage access to the CSD HW block. Each middleware access to the CSD HW block is through the CSD Driver.</p>
<p>The CSD HW block can support only one function at a time. However, all supported functionality (like CapSense, ADC, etc.) can be time-multiplexed in a design. I.e. you can save the existing state of the CapSense middleware, restore the state of the ADC middleware, perform ADC measurements, and then switch back to the CapSense functionality. For more details and code examples refer to the description of the <a class="el" href="group__group__capsense__high__level.html#gab34cf6cb8be7afa43cd401240acc7887" title="Saves the state of CapSense so the functionality can be restored using the Cy_CapSense_Restore() func...">Cy_CapSense_Save()</a> and <a class="el" href="group__group__capsense__high__level.html#ga557cb94f2d590c766433d97c9b29cc1c" title="Resumes the middleware operation if the Cy_CapSense_Save() function was called previously. ">Cy_CapSense_Restore()</a> functions.</p>
<div class="image">
<img src="capsense_solution.png" alt="capsense_solution.png" width="800px"/>
<div class="caption">
CapSense Solution</div></div>
 <p>This section describes only CapSense middleware. Refer to the corresponding sections for documentation of other middleware supported by the CSD HW block.</p>
<p>A CapSense solution includes:</p><ul>
<li>The CapSense Configurator tool, which is a configuration wizard to create and configure CapSense widgets. It could be launched in ModusToolbox from the CSD personality as well as in standalone mode. It contains a separate document about how to create and configure widgets, parameters and algorithm descriptions.</li>
<li>API to control the design from the application program. This documentation describes API with code snippets of how to use them.</li>
<li>The CapSense Tuner tool for real-time tuning, testing, and debugging, for easy and smooth designing of human interfaces on customer products. The Tuner tool communicates with a device through a HW bridge and communication drivers (EzI2C, UART, etc.) and allows to monitor widget statuses, sensor signals, detected touch positions, gestures, etc. The application program does not need to interact with the CSD driver and/or other drivers such as GPIO, SysClk directly. All of that is configured and managed by middleware.</li>
</ul>
<p>Include cy_capsense.h to get access to all functions and other declarations in this library. If you are using the ModusToolbox CapSense Configurator tool, you can include cycfg_capsense.h only.</p>
<h2><a class="anchor" id="subsection_capsense_features"></a>
Features</h2>
<ul>
<li>Offers best-in-class signal-to-noise ratio (SNR)</li>
<li>Supports Self-Capacitance (CSD) and Mutual-Capacitance (CSX) sensing methods</li>
<li>Features SmartSense auto-tuning technology for CSD sensing to avoid complex manual tuning process</li>
<li>Supports various Widgets, such as Buttons, Matrix Buttons, Sliders, Touchpads, and Proximity Sensors</li>
<li>Provides ultra-low power consumption and liquid-tolerant capacitive sensing technology</li>
<li>Contains the integrated graphical CapSense Tuner tool for real-time tuning, testing, and debugging</li>
<li>Provides superior immunity against external noise and low-radiated emission</li>
<li>Offers best-in-class liquid tolerance</li>
<li>Supports one-finger and two-finger gestures</li>
</ul>
<h1><a class="anchor" id="section_capsense_configuration"></a>
Summary of Application Programming Interface (API)</h1>
<p>The CapSense operates on the top of the CapSense Sigma Delta (CSD) driver. Refer to the PDL API Reference Manual.</p>
<p>This document provides descriptions of the functions in the CapSense middleware library, and descriptions of the data structures (register map) used by the middleware library.</p>
<p>The Application Programming Interface (API) routines allow controlling and executing specific tasks using the CapSense middleware. The CapSense API is described in the following sections:</p><ul>
<li><a class="el" href="group__group__capsense__high__level.html">High-level Functions</a></li>
<li><a class="el" href="group__group__capsense__low__level.html">Low-level Functions</a></li>
<li><a class="el" href="group__group__capsense__data__structure.html">CapSense Data Structure</a></li>
<li><a class="el" href="group__group__capsense__enums.html">Enumerated Types</a></li>
<li><a class="el" href="group__group__capsense__macros.html">Macros</a></li>
<li><a class="el" href="group__group__capsense__callbacks.html">Callbacks</a></li>
</ul>
<h1><a class="anchor" id="section_capsense_misra"></a>
MISRA-C Compliance</h1>
<table class="doxtable">
<tr>
<th>MISRA Rule </th><th>Rule Class (Required/Advisory) </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>11.4 </td><td>A </td><td>A conversion should not be performed between a pointer to object and an integer type. </td><td>Such conversion is performed with CapSense context in two cases: interrupt handler and DeepSleepCallback function. Both cases are verified on correct operation.  </td></tr>
<tr>
<td>12.13 </td><td>A </td><td>The increment (++) and decrement (&ndash;) operators should not be mixed with other operators in an expression. </td><td>These violations are reported for the GCC ARM optimized form of the "for" loop that have the following syntax: for(index = COUNT; index &ndash;&gt; 0u;) It is used to improve performance.  </td></tr>
<tr>
<td>1.2 </td><td rowspan="2">R </td><td rowspan="2">Constant: Dereference of NULL pointer. </td><td rowspan="2">These violations are reported as a result of using of offset macros of CSD Driver with corresponding documented violation 20.6. Refer to CSD Driver API Ref Guide.  </td></tr>
<tr>
<td>20.3  </td></tr>
</table>
<h1><a class="anchor" id="section_capsense_more_information"></a>
More Information</h1>
<p>Important information about the CapSense-technology overview, appropriate Cypress device for the design, CapSense system and sensor design guidelines, different interfaces and tuning guidelines necessary for a successful design of a CapSense system is available in the Getting Started with CapSense document and the product-specific CapSense design guide. Cypress highly recommends starting with these documents. They can be found on the Cypress web site at www.cypress.com. For details about application notes, code examples, and kits, see the References section in this datasheet.</p>
<p>For more information, refer to the following documents:</p>
<ul>
<li><a href="http://www.cypress.com/trm218176"><b>Technical Reference Manual (TRM)</b></a></li>
<li><a href="http://www.cypress.com/ds218787"><b>PSoC 63 with BLE Datasheet Programmable System-on-Chip datasheet</b></a></li>
<li><a href="http://www.cypress.com/an85951"><b>AN85951 PSoC 4 and PSoC 6 MCU CapSense Design Guide for more details</b></a></li>
<li><a href="http://www.cypress.com/an210781"><b>AN210781 Getting Started with PSoC 6 MCU with Bluetooth Low Energy (BLE) Connectivity</b></a></li>
</ul>
<h1><a class="anchor" id="section_capsense_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td rowspan="2">1.20 </td><td>Added ARMC6 compiler support </td><td>Feature enhancement  </td></tr>
<tr>
<td>Changed the hierarchy of the binary files folders </td><td>MBED OS compatibility  </td></tr>
<tr>
<td rowspan="6">1.1 </td><td><p class="starttd">The following functions made obsolete:</p><ul>
<li><a class="el" href="group__group__capsense__low__level.html#gaff00959c95147f8374b1629caa45c43c" title="Performs the initialization required to scan the specified CSD widget. ">Cy_CapSense_CSDSetupWidget()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga898ff1a676637f32c34140f88d5d275f" title="Performs extended initialization required to scan a specified sensor in a widget using CSD sensing me...">Cy_CapSense_CSDSetupWidgetExt()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#gad5faac7e10eb8c4193d7c93b5615ac70" title="This function initiates a scan for the sensors of the widget initialized by the Cy_CapSense_CSDSetupW...">Cy_CapSense_CSDScan()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga93d8ff09f519f7bfd17b5bf4bcb8f727" title="Starts the CSD conversion on the preconfigured sensor. ">Cy_CapSense_CSDScanExt()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga267502081ebfd5ed1221debd9167e7fa" title="Executes the IDAC calibration for all the sensors in the widget specified in the input. ">Cy_CapSense_CSDCalibrateWidget()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga4a13b66055d7d1649c47cb75d1d65f62" title="Performs the initialization required to scan the specified CSX widget. ">Cy_CapSense_CSXSetupWidget()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga39248233bf04b09b3e24d02b6e615d32" title="Performs extended initialization required to scan a specified sensor in a widget using CSX sensing me...">Cy_CapSense_CSXSetupWidgetExt()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#gaa76f71d361d42796da2a716a207766cd" title="This function initiates a scan for the sensors of the widget initialized by the Cy_CapSense_CSXSetupW...">Cy_CapSense_CSXScan()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#gaeba90684124922020af9fa5ad33d54fc" title="Starts the CSD conversion on the preconfigured sensor. ">Cy_CapSense_CSXScanExt()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga8a4028854e3a14c0ec6c11c1a9b74fd6" title="Executes the IDAC calibration for all the sensors in the widget specified in the input. ">Cy_CapSense_CSXCalibrateWidget()</a></li>
</ul>
<p class="endtd">Two simple functions introduced to replace the listed above functions:</p><ul>
<li><a class="el" href="group__group__capsense__low__level.html#ga6e1e04fc3230d480e725e8f7bb3848e5" title="Performs extended initialization for the specified widget and also performs initialization required f...">Cy_CapSense_SetupWidgetExt()</a></li>
<li><a class="el" href="group__group__capsense__low__level.html#ga1453dd4d533eaf1ab4a92ceb8d8230f2" title="Starts a conversion on the pre-configured sensor. ">Cy_CapSense_ScanExt()</a>  </li>
</ul>
</td><td>User experience improvement  </td></tr>
<tr>
<td>Fixed the shield operation when Csh is disabled </td><td>Defect fixing  </td></tr>
<tr>
<td>Fixed the implementation of the position filtering for the Radial Slider widget </td><td>Defect fixing  </td></tr>
<tr>
<td>Added restoring hardware to its default state in the <a class="el" href="group__group__capsense__high__level.html#ga869e820c584a21f68aaa1e900be94a1b" title="Stops the middleware operation and releases the CSD HW block. ">Cy_CapSense_DeInit()</a> implementation </td><td>Defect fixing  </td></tr>
<tr>
<td>Added the capability to enable the shield electrode without dedicated electrodes </td><td>Feature enhancement  </td></tr>
<tr>
<td>Added support of a protocol-agnostic tuner interface (UART, SPI, etc.) </td><td>Feature enhancement  </td></tr>
<tr>
<td>1.0 </td><td>The initial version  </td><td></td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Cypress CapSense Middleware Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
